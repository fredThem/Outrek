<div class="card mb-4 shadow">
  <div class="row no-gutters">

    <% if local_assigns[:map] %>

      <div class="<%= local_assigns[:card_img_col] %>">

        <%= render 'trips/card/static_map', { trip: trip } %>
      </div>

    <% end %>

    <div class="<%= local_assigns[:card_body_col] %>">
      <% if local_assigns[:dynamic_map] %>

          <div id="map"
            style="height: 200px; object-fit: cover;"
            data-center="<%= center %>"
            data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
          </div>

      <% end %>
      <div class="card-body position-relative">
        <%= render 'trips/card/display_dates', { trip: trip } %>
        <%# raise %>
        <%= link_to trip.description, trip_path(trip), class: "stretched-link text-decoration-none text-dark h3" %>
        <p class="text-primary"><i class="fas fa-map-marker-alt"></i> <%= trip.destination %></p>
        <p class="card-text">
          <% trip.activities.each do |activity| %>
            <span class="badge bg-info"><%= activity.name %></span>
          <% end %>
        </p>
        <p><strong>Trip Outrekers:</strong>
        <br>
          <span class="badge badge-primary"><%= trip.user.first_name.capitalize %></span>
            <% if trip.user.avatar.attached? %>
              <%= cl_image_tag trip.user.avatar.key, height: '60px', width: '60px', style: "object-fit: cover", class: "rounded-circle"  %>
            <% else %>
              <div class="border-3 rounded-circle d-flex" width="40" height="40">
                <i class="bi bi-person-bounding-box"></i>
              </div>
            <% end %>
          <% trip.invitations.each do |invitation| %>
            <span class="badge badge-secondary"><%= invitation.user.first_name.capitalize unless invitation.user == trip.user%></span>
              <% if invitation.user.avatar.attached? %>
                  <%= cl_image_tag invitation.user.avatar.key, height: '60px', width: '60px', style: "object-fit: cover", class: "rounded-circle"  %>
                <% else %>
                  <div class="border-3 rounded-circle d-flex" width="40" height="40">
                    <i class="bi bi-person-bounding-box"></i>
                  </div>
                <% end %>
          <% end %>
        </p>
      </div>
    </div>
  </div>
</div>
